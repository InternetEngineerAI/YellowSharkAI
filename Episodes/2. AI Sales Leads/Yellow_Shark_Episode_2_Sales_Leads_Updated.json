{
  "name": "Yellow Shark Mill Company · Sales Route Assistant",
  "version": "3.0",
  "description": "Simplified JSON: single unified AI instruction template used for Gemini, Copilot, and Grok.",
  "trigger_phrases": [
    "start shark"
  ],
  "default_language": "English",
  "supported_languages": [
    "English",
    "Español"
  ],
  "on_trigger": {
    "message_bilingual": "Welcome to Yellow Shark Mill Company Sales Ops Assistant.\nWe’ll help you build bakery leads for outbound calls and in-person routes.\n\nBienvenido al Asistente de Ventas de Yellow Shark Mill Company.\nTe ayudaremos a crear y organizar leads de panaderías para llamadas y visitas.\n\nChoose your language / Elige tu idioma:\n1. English\n2. Español",
    "next_state": "LANG_SELECT"
  },
  "states": {
    "LANG_SELECT": {
      "type": "choice",
      "choices": {
        "1": {
          "set_language": "English",
          "next_state": "TARGET_MARKET"
        },
        "2": {
          "set_language": "Español",
          "next_state": "TARGET_MARKET"
        }
      }
    },
    "TARGET_MARKET": {
      "prompt_en": "Which bakeries do you want to target?\n1) Regional Chain Bakeries (5–100 locations)\n2) Artisan / High-End Bakeries\n3) Both",
      "prompt_es": "¿Qué panaderías deseas targetear?\n1) Cadenas regionales (5–100 locales)\n2) Artesanales / Alta gama\n3) Ambas",
      "choices": {
        "1": {
          "set": {
            "segment": "RegionalChain"
          },
          "next_state": "LEAD_SOURCE"
        },
        "2": {
          "set": {
            "segment": "ArtisanHighEnd"
          },
          "next_state": "LEAD_SOURCE"
        },
        "3": {
          "set": {
            "segment": "Both"
          },
          "next_state": "LEAD_SOURCE"
        }
      }
    },
    "LEAD_SOURCE": {
      "prompt_en": "Where should we get leads?\n1) Gemini\n2) Microsoft Copilot\n3) Grok\n4) Upload CSV",
      "prompt_es": "¿De dónde obtenemos los leads?\n1) Gemini\n2) Microsoft Copilot\n3) Grok\n4) Subir CSV",
      "choices": {
        "1": {
          "set": {
            "source": "Gemini"
          },
          "next_state": "CLEAN_ENRICH"
        },
        "2": {
          "set": {
            "source": "Copilot"
          },
          "next_state": "CLEAN_ENRICH"
        },
        "3": {
          "set": {
            "source": "Grok"
          },
          "next_state": "CLEAN_ENRICH"
        },
        "4": {
          "expect_upload": true,
          "validate_schema": true,
          "preview_rows": 5,
          "next_state": "CLEAN_ENRICH"
        }
      }
    },
    "CLEAN_ENRICH": {
      "announce_en": "Cleaning and normalizing leads.",
      "announce_es": "Limpiando y normalizando leads.",
      "actions": [
        {
          "add_lead_id": "YSMC-{YYYYMMDD}-{SEQ4}"
        },
        {
          "normalize_state_to_usps": true
        },
        {
          "format_phone_email": true
        },
        {
          "tag_segment_from_selection_or_keywords": true
        }
      ],
      "prompt_en": "Enrich with public contacts (Owner/Buyer/Head Baker)? (yes/no)",
      "prompt_es": "¿Enriquecer con contactos públicos (Dueño/Comprador/Maestro Panadero)? (sí/no)",
      "choices": {
        "yes": {
          "perform": [
            "enrich_contacts_public"
          ],
          "next_state": "EXPORTS"
        },
        "sí": {
          "perform": [
            "enrich_contacts_public"
          ],
          "next_state": "EXPORTS"
        },
        "no": {
          "next_state": "EXPORTS"
        }
      }
    },
    "EXPORTS": {
      "prompt_en": "Choose export format(s): 1) Master CSV  2) RingOver  3) ReadyMode  4) Generic Dialer  5) Field Sales",
      "prompt_es": "Elige formato(s): 1) Master CSV  2) RingOver  3) ReadyMode  4) Dialer Genérico  5) Ventas de Campo",
      "choices": {
        "1": {
          "export": [
            "master_csv"
          ],
          "next_state": "DONE"
        },
        "2": {
          "export": [
            "ringover_csv"
          ],
          "next_state": "DONE"
        },
        "3": {
          "export": [
            "readymode_csv"
          ],
          "next_state": "DONE"
        },
        "4": {
          "export": [
            "generic_dialer_csv"
          ],
          "next_state": "DONE"
        },
        "5": {
          "export": [
            "field_sales_csv"
          ],
          "next_state": "DONE"
        }
      }
    },
    "DONE": {
      "message_en": "Your files are ready. You can open them in Excel or import into your dialer.",
      "message_es": "Tus archivos están listos. Ábrelos en Excel o impórtalos en tu marcador.",
      "end": true
    }
  },
  "master_schema": {
    "headers": [
      "LeadId",
      "CompanyName",
      "Segment",
      "LocationCount",
      "ContactFirst",
      "ContactLast",
      "Title",
      "Phone",
      "AltPhone",
      "Email",
      "Website",
      "Address",
      "City",
      "State",
      "PostalCode",
      "Country",
      "Timezone",
      "DNCFlag",
      "Notes",
      "Latitude",
      "Longitude",
      "GoogleMapsLink",
      "WalkOrder",
      "DistanceFromPrevMeters"
    ],
    "rules": {
      "lead_id_pattern": "YSMC-YYYYMMDD-SEQ4",
      "segment_values": [
        "RegionalChain",
        "ArtisanHighEnd"
      ],
      "timezone_infer_from_geocode": true,
      "dnc_default": "No",
      "csv_encoding": "UTF-8",
      "quote_minimal": true
    }
  },
  "dialer_mappings": {
    "ringover": {
      "headers": [
        "number",
        "name",
        "company",
        "email",
        "address",
        "city",
        "state",
        "zip",
        "country",
        "notes",
        "custom_1",
        "custom_2"
      ],
      "map": {
        "number": "Phone",
        "name": "concat(ContactFirst,' ',ContactLast, fallback CompanyName)",
        "company": "CompanyName",
        "email": "Email",
        "address": "Address",
        "city": "City",
        "state": "State",
        "zip": "PostalCode",
        "country": "Country",
        "notes": "Notes",
        "custom_1": "GoogleMapsLink",
        "custom_2": "LeadId"
      }
    },
    "readymode": {
      "headers": [
        "phone",
        "first_name",
        "last_name",
        "company",
        "address",
        "city",
        "state",
        "postal_code",
        "country",
        "list_name",
        "notes"
      ],
      "map": {
        "phone": "Phone",
        "first_name": "ContactFirst",
        "last_name": "ContactLast",
        "company": "CompanyName",
        "address": "Address",
        "city": "City",
        "state": "State",
        "postal_code": "PostalCode",
        "country": "Country",
        "list_name": "Segment",
        "notes": "Notes"
      }
    },
    "generic": {
      "headers": [
        "phone",
        "company",
        "first_name",
        "last_name",
        "title",
        "email",
        "address",
        "city",
        "state",
        "zip",
        "country",
        "timezone",
        "notes",
        "external_id"
      ],
      "map": {
        "phone": "Phone",
        "company": "CompanyName",
        "first_name": "ContactFirst",
        "last_name": "ContactLast",
        "title": "Title",
        "email": "Email",
        "address": "Address",
        "city": "City",
        "state": "State",
        "zip": "PostalCode",
        "country": "Country",
        "timezone": "Timezone",
        "notes": "Notes",
        "external_id": "LeadId"
      }
    }
  },
  "field_sales_export_schema": {
    "headers": [
      "LeadId",
      "CompanyName",
      "Segment",
      "ContactName",
      "Phone",
      "Email",
      "Website",
      "Address",
      "City",
      "State",
      "PostalCode",
      "Country"
    ],
    "geocoding_instructions": [
      "Go to https://www.geocod.io and select USPS ZIP+4 to get Latitude and Longitude for each address.",
      "Once Latitude and Longitude are added by Geocodio, import the updated CSV into Gemini and prompt: Create a multi-stop route optimized for shortest travel distance."
    ]
  },
  "unified_ai_instruction": {
    "links": {
      "gemini": "https://gemini.google.com/",
      "copilot": "https://copilot.microsoft.com/",
      "grok": "https://grok.com/"
    },
    "title": "Unified AI Instructions (use for Gemini, Copilot, and Grok)",
    "final_critical_step": true,
    "headers": [
      "CompanyName",
      "ContactName",
      "Address",
      "City",
      "State",
      "PostalCode",
      "Country",
      "Phone",
      "Email",
      "Website"
    ],
    "prompt_template": "Retrieve a list of Regional Chain Bakeries and Artisan/High-End Bakeries located in {{TargetLocation}}.\n\nInclude only bakeries that bake in-house and purchase flour by pallet or bulk.\nExclude supermarkets, cafés, and national chains.\n\nFor each bakery, provide:\n- Company name\n- Contact person or owner (if available)\n- Address, city, state, postal code, and country\n- Phone number\n- Email (if available)\n- Website (if available)\n\nData Integrity Rule:\nFor proprietary fields (Owner/Contact Person and Email), leave blank if not publicly available.\nFor public-facing fields (Address, Phone Number, Website), perform reasonable search to locate and fill these fields; do not leave blank if easily verifiable.\n\nFinal, Critical Step (must be executed last):\nReturn the data only as raw CSV text (no markdown, no summaries) using these headers:\nCompanyName, ContactName, Address, City, State, PostalCode, Country, Phone, Email, Website",
    "fallback_summary": "List bakeries in [TargetLocation]. Include name, contact, address, phone, email, and website. Verify public fields (address, phone, website). Output raw CSV only with the specified headers."
  },
  "meta": {
    "last_updated": "2025-11-10T04:30:38.019946Z",
    "author": "Internet Engineer",
    "notes": "v3.0 simplified to a single unified AI instruction template applied to Gemini, Copilot, and Grok."
  }
}